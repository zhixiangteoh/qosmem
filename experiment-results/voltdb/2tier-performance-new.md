# Motivation Experiments - 2-Tier Memory System

## 2-tier memory system - performance of VoltDB against available local DRAM

```sh
function client() {
    jars-ifneeded
    java -classpath $APPNAME-client.jar:$APPNAME-procs.jar:$APPCLASSPATH com.MyTPCC \
        --servers=localhost \
        --transactions=580000 \
	--ratelimit=200000 \
        --warehouses=256 \
        --scalefactor=5
}
```

### Max WSS (RSS): ~16.2GB
### Max WSS (Ref):  ~3.4GB

### 192GB (default) local DRAM, 192GB (default) remote DRAM

#### Run 1
```
============================== BENCHMARK RESULTS ==============================
Time: 181346 ms
Total transactions: 5800000
Transactions per second: 31983.06
            Stock Level:     232560 total      1282.41 txn/s     76944.63 txn/m
               Delivery:     231959 total      1279.10 txn/s     76745.78 txn/m
           Order Status:     231856 total      1278.53 txn/s     76711.70 txn/m
                Payment:    2493985 total     13752.63 txn/s    825158.06 txn/m
              New Order:    2609640 total     14390.39 txn/s    863423.56 txn/m
        Reset Warehouse:          0 total         0.00 txn/s         0.00 txn/m
===============================================================================



*************************************************************************
System Statistics
*************************************************************************
 - Ran for 181.35 seconds
 - Performed 5,800,000 Stored Procedure calls
 - At 31,983.06 calls per second
 - Average Latency = 64.60 ms
 -   Latency   0ms -  25ms = 1,920
 -   Latency  25ms -  50ms = 3,307,164
 -   Latency  50ms -  75ms = 1,421,471
 -   Latency  75ms - 100ms = 310,891
 -   Latency 100ms - 125ms = 366,710
 -   Latency 125ms - 150ms = 297,431
 -   Latency 150ms - 175ms = 51,389
 -   Latency 175ms - 200ms = 3,436
 -   Latency 200ms+        = 39,588


-------------------------------------------------------------------------------------
 System Statistics
-------------------------------------------------------------------------------------


-------------------------------------------------------------------------------------
Final:   | Txn.:   5,800,000 [!     26,236] @    31,983.8 TPS | Lat. =       3 <    64.60 <    3624
-------------------------------------------------------------------------------------
Lat.:     25 <     50 <     75 <    100 <    150 <    200 <    250 <    300 <    300+
-------------------------------------------------------------------------------------
%       0.03 |  57.02 |  24.51 |   5.36 |  11.45 |   0.95 |   0.10 |   0.08 |   0.50
voltdb client ended at 1688157134380426132
voltdb client run time 280231320936 ns
```

### 20GB local DRAM, 80GB remote DRAM

#### Run 1
```
============================== BENCHMARK RESULTS ==============================
Time: 192499 ms
Total transactions: 5800000
Transactions per second: 30130.03
            Stock Level:     232560 total      1208.11 txn/s     72486.61 txn/m
               Delivery:     231959 total      1204.99 txn/s     72299.29 txn/m
           Order Status:     231856 total      1204.45 txn/s     72267.18 txn/m
                Payment:    2493985 total     12955.83 txn/s    777350.06 txn/m
              New Order:    2609640 total     13556.64 txn/s    813398.56 txn/m
        Reset Warehouse:          0 total         0.00 txn/s         0.00 txn/m
===============================================================================



*************************************************************************
System Statistics
*************************************************************************
 - Ran for 192.50 seconds
 - Performed 5,800,000 Stored Procedure calls
 - At 30,130.03 calls per second
 - Average Latency = 68.63 ms
 -   Latency   0ms -  25ms = 1,103
 -   Latency  25ms -  50ms = 3,015,559
 -   Latency  50ms -  75ms = 1,675,737
 -   Latency  75ms - 100ms = 304,018
 -   Latency 100ms - 125ms = 338,280
 -   Latency 125ms - 150ms = 339,852
 -   Latency 150ms - 175ms = 63,987
 -   Latency 175ms - 200ms = 6,590
 -   Latency 200ms+        = 54,874


-------------------------------------------------------------------------------------
 System Statistics
-------------------------------------------------------------------------------------


-------------------------------------------------------------------------------------
Final:   | Txn.:   5,800,000 [!     26,236] @    30,130.7 TPS | Lat. =       3 <    68.63 <    4308
-------------------------------------------------------------------------------------
Lat.:     25 <     50 <     75 <    100 <    150 <    200 <    250 <    300 <    300+
-------------------------------------------------------------------------------------
%       0.02 |  51.99 |  28.89 |   5.24 |  11.69 |   1.22 |   0.20 |   0.05 |   0.69
voltdb client ended at 1688156585025405164
voltdb client run time 293291438453 ns
```

### 18GB local DRAM, 80GB remote DRAM

#### Run 1
```
============================== BENCHMARK RESULTS ==============================
Time: 221886 ms
Total transactions: 5800000
Transactions per second: 26139.55
            Stock Level:     232560 total      1048.11 txn/s     62886.35 txn/m
               Delivery:     231959 total      1045.40 txn/s     62723.83 txn/m
           Order Status:     231856 total      1044.93 txn/s     62695.98 txn/m
                Payment:    2493985 total     11239.94 txn/s    674396.31 txn/m
              New Order:    2609640 total     11761.17 txn/s    705670.50 txn/m
        Reset Warehouse:          0 total         0.00 txn/s         0.00 txn/m
===============================================================================



*************************************************************************
System Statistics
*************************************************************************
 - Ran for 221.89 seconds
 - Performed 5,800,000 Stored Procedure calls
 - At 26,139.55 calls per second
 - Average Latency = 79.36 ms
 -   Latency   0ms -  25ms = 1,043
 -   Latency  25ms -  50ms = 2,313,566
 -   Latency  50ms -  75ms = 2,082,066
 -   Latency  75ms - 100ms = 406,737
 -   Latency 100ms - 125ms = 300,606
 -   Latency 125ms - 150ms = 306,687
 -   Latency 150ms - 175ms = 68,290
 -   Latency 175ms - 200ms = 31,057
 -   Latency 200ms+        = 289,948


-------------------------------------------------------------------------------------
 System Statistics
-------------------------------------------------------------------------------------


-------------------------------------------------------------------------------------
Final:   | Txn.:   5,800,000 [!     26,236] @    26,139.8 TPS | Lat. =       3 <    79.36 <    4233
-------------------------------------------------------------------------------------
Lat.:     25 <     50 <     75 <    100 <    150 <    200 <    250 <    300 <    300+
-------------------------------------------------------------------------------------
%       0.02 |  39.89 |  35.90 |   7.01 |  10.47 |   1.71 |   2.15 |   1.39 |   1.45
voltdb client ended at 1688153698526336567
voltdb client run time 341710733611 ns
```

### 14GB local DRAM, 80GB remote DRAM

#### Run 1
```
============================== BENCHMARK RESULTS ==============================
Time: 231049 ms
Total transactions: 5800000
Transactions per second: 25102.90
            Stock Level:     232560 total      1006.54 txn/s     60392.39 txn/m
               Delivery:     231959 total      1003.94 txn/s     60236.32 txn/m
           Order Status:     231856 total      1003.49 txn/s     60209.57 txn/m
                Payment:    2493985 total     10794.18 txn/s    647650.94 txn/m
              New Order:    2609640 total     11294.75 txn/s    677684.81 txn/m
        Reset Warehouse:          0 total         0.00 txn/s         0.00 txn/m
===============================================================================



*************************************************************************
System Statistics
*************************************************************************
 - Ran for 231.05 seconds
 - Performed 5,800,000 Stored Procedure calls
 - At 25,102.90 calls per second
 - Average Latency = 82.79 ms
 -   Latency   0ms -  25ms = 1,751
 -   Latency  25ms -  50ms = 1,738,934
 -   Latency  50ms -  75ms = 2,540,115
 -   Latency  75ms - 100ms = 495,266
 -   Latency 100ms - 125ms = 317,987
 -   Latency 125ms - 150ms = 292,510
 -   Latency 150ms - 175ms = 84,775
 -   Latency 175ms - 200ms = 8,300
 -   Latency 200ms+        = 320,362


-------------------------------------------------------------------------------------
 System Statistics
-------------------------------------------------------------------------------------


-------------------------------------------------------------------------------------
Final:   | Txn.:   5,800,000 [!     26,236] @    25,103.1 TPS | Lat. =       4 <    82.79 <    3262
-------------------------------------------------------------------------------------
Lat.:     25 <     50 <     75 <    100 <    150 <    200 <    250 <    300 <    300+
-------------------------------------------------------------------------------------
%       0.03 |  29.98 |  43.80 |   8.54 |  10.53 |   1.60 |   1.18 |   2.19 |   2.15
voltdb client ended at 1688154339509372396
voltdb client run time 351946214775 ns
```

### 10GB local DRAM, 80GB remote DRAM

#### Run 1
```
============================== BENCHMARK RESULTS ==============================
Time: 241650 ms
Total transactions: 5800000
Transactions per second: 24001.66
            Stock Level:     232560 total       962.38 txn/s     57743.02 txn/m
               Delivery:     231959 total       959.90 txn/s     57593.79 txn/m
           Order Status:     231856 total       959.47 txn/s     57568.22 txn/m
                Payment:    2493985 total     10320.65 txn/s    619239.00 txn/m
              New Order:    2609640 total     10799.26 txn/s    647955.31 txn/m
        Reset Warehouse:          0 total         0.00 txn/s         0.00 txn/m
===============================================================================



*************************************************************************
System Statistics
*************************************************************************
 - Ran for 241.65 seconds
 - Performed 5,800,000 Stored Procedure calls
 - At 24,001.66 calls per second
 - Average Latency = 86.64 ms
 -   Latency   0ms -  25ms = 913
 -   Latency  25ms -  50ms = 1,134,413
 -   Latency  50ms -  75ms = 3,119,538
 -   Latency  75ms - 100ms = 458,724
 -   Latency 100ms - 125ms = 204,625
 -   Latency 125ms - 150ms = 331,319
 -   Latency 150ms - 175ms = 196,203
 -   Latency 175ms - 200ms = 27,741
 -   Latency 200ms+        = 326,524


-------------------------------------------------------------------------------------
 System Statistics
-------------------------------------------------------------------------------------


-------------------------------------------------------------------------------------
Final:   | Txn.:   5,800,000 [!     26,236] @    24,002.1 TPS | Lat. =       3 <    86.64 <    2923
-------------------------------------------------------------------------------------
Lat.:     25 <     50 <     75 <    100 <    150 <    200 <    250 <    300 <    300+
-------------------------------------------------------------------------------------
%       0.02 |  19.56 |  53.79 |   7.91 |   9.24 |   3.86 |   0.91 |   2.35 |   2.37
voltdb client ended at 1688151959646420734
voltdb client run time 343737281281 ns
```

### 4GB local DRAM, 80GB remote DRAM

#### Run 1
```
============================== BENCHMARK RESULTS ==============================
Time: 254127 ms
Total transactions: 5800000
Transactions per second: 22823.23
            Stock Level:     232560 total       915.13 txn/s     54907.98 txn/m
               Delivery:     231959 total       912.77 txn/s     54766.08 txn/m
           Order Status:     231856 total       912.36 txn/s     54741.76 txn/m
                Payment:    2493985 total      9813.93 txn/s    588835.94 txn/m
              New Order:    2609640 total     10269.04 txn/s    616142.31 txn/m
        Reset Warehouse:          0 total         0.00 txn/s         0.00 txn/m
===============================================================================



*************************************************************************
System Statistics
*************************************************************************
 - Ran for 254.13 seconds
 - Performed 5,800,000 Stored Procedure calls
 - At 22,823.23 calls per second
 - Average Latency = 91.16 ms
 -   Latency   0ms -  25ms = 556
 -   Latency  25ms -  50ms = 721,620
 -   Latency  50ms -  75ms = 3,385,211
 -   Latency  75ms - 100ms = 569,379
 -   Latency 100ms - 125ms = 221,016
 -   Latency 125ms - 150ms = 310,746
 -   Latency 150ms - 175ms = 205,426
 -   Latency 175ms - 200ms = 40,101
 -   Latency 200ms+        = 345,945


-------------------------------------------------------------------------------------
 System Statistics
-------------------------------------------------------------------------------------


-------------------------------------------------------------------------------------
Final:   | Txn.:   5,800,000 [!     26,236] @    22,823.5 TPS | Lat. =       6 <    91.16 <    3747
-------------------------------------------------------------------------------------
Lat.:     25 <     50 <     75 <    100 <    150 <    200 <    250 <    300 <    300+
-------------------------------------------------------------------------------------
%       0.01 |  12.44 |  58.37 |   9.82 |   9.17 |   4.23 |   0.31 |   2.10 |   3.56
voltdb client ended at 1688152761842022483
voltdb client run time 382430221723 ns
```


### 2GB local DRAM, 80GB remote DRAM

#### Run 1
```
============================== BENCHMARK RESULTS ==============================
Time: 258870 ms
Total transactions: 5800000
Transactions per second: 22405.07
            Stock Level:     232560 total       898.37 txn/s     53901.96 txn/m
               Delivery:     231959 total       896.04 txn/s     53762.66 txn/m
           Order Status:     231856 total       895.65 txn/s     53738.79 txn/m
                Payment:    2493985 total      9634.12 txn/s    578047.31 txn/m
              New Order:    2609640 total     10080.89 txn/s    604853.44 txn/m
        Reset Warehouse:          0 total         0.00 txn/s         0.00 txn/m
===============================================================================



*************************************************************************
System Statistics
*************************************************************************
 - Ran for 258.87 seconds
 - Performed 5,800,000 Stored Procedure calls
 - At 22,405.07 calls per second
 - Average Latency = 92.91 ms
 -   Latency   0ms -  25ms = 856
 -   Latency  25ms -  50ms = 467,310
 -   Latency  50ms -  75ms = 3,602,561
 -   Latency  75ms - 100ms = 571,664
 -   Latency 100ms - 125ms = 209,021
 -   Latency 125ms - 150ms = 275,488
 -   Latency 150ms - 175ms = 261,535
 -   Latency 175ms - 200ms = 72,297
 -   Latency 200ms+        = 339,268


-------------------------------------------------------------------------------------
 System Statistics
-------------------------------------------------------------------------------------


-------------------------------------------------------------------------------------
Final:   | Txn.:   5,800,000 [!     26,236] @    22,405.5 TPS | Lat. =       3 <    92.91 <    3988
-------------------------------------------------------------------------------------
Lat.:     25 <     50 <     75 <    100 <    150 <    200 <    250 <    300 <    300+
-------------------------------------------------------------------------------------
%       0.01 |   8.06 |  62.11 |   9.86 |   8.35 |   5.76 |   0.23 |   1.89 |   3.74
voltdb client ended at 1688148096285029381
voltdb client run time 384752585052 ns
```

#### Run 2
```
============================== BENCHMARK RESULTS ==============================
Time: 260854 ms
Total transactions: 5800000
Transactions per second: 22234.66
            Stock Level:     232560 total       891.53 txn/s     53491.99 txn/m
               Delivery:     231959 total       889.23 txn/s     53353.75 txn/m
           Order Status:     231856 total       888.83 txn/s     53330.06 txn/m
                Payment:    2493985 total      9560.85 txn/s    573650.81 txn/m
              New Order:    2609640 total     10004.22 txn/s    600253.00 txn/m
        Reset Warehouse:          0 total         0.00 txn/s         0.00 txn/m
===============================================================================



*************************************************************************
System Statistics
*************************************************************************
 - Ran for 260.85 seconds
 - Performed 5,800,000 Stored Procedure calls
 - At 22,234.66 calls per second
 - Average Latency = 93.73 ms
 -   Latency   0ms -  25ms = 625
 -   Latency  25ms -  50ms = 411,027
 -   Latency  50ms -  75ms = 3,623,831
 -   Latency  75ms - 100ms = 586,196
 -   Latency 100ms - 125ms = 230,610
 -   Latency 125ms - 150ms = 270,968
 -   Latency 150ms - 175ms = 254,438
 -   Latency 175ms - 200ms = 66,854
 -   Latency 200ms+        = 355,451


-------------------------------------------------------------------------------------
 System Statistics
-------------------------------------------------------------------------------------


-------------------------------------------------------------------------------------
Final:   | Txn.:   5,800,000 [!     26,236] @    22,235.1 TPS | Lat. =       3 <    93.73 <    3136
-------------------------------------------------------------------------------------
Lat.:     25 <     50 <     75 <    100 <    150 <    200 <    250 <    300 <    300+
-------------------------------------------------------------------------------------
%       0.01 |   7.09 |  62.48 |  10.11 |   8.65 |   5.54 |   0.26 |   2.01 |   3.85
voltdb client ended at 1688155043308392988
voltdb client run time 391093323225 ns
```

### 1GB local DRAM, 80GB remote DRAM

#### Run 1
```
============================== BENCHMARK RESULTS ==============================
Time: 260683 ms
Total transactions: 5800000
Transactions per second: 22249.24
            Stock Level:     232560 total       892.12 txn/s     53527.08 txn/m
               Delivery:     231959 total       889.81 txn/s     53388.75 txn/m
           Order Status:     231856 total       889.42 txn/s     53365.04 txn/m
                Payment:    2493985 total      9567.12 txn/s    574027.06 txn/m
              New Order:    2609640 total     10010.78 txn/s    600646.75 txn/m
        Reset Warehouse:          0 total         0.00 txn/s         0.00 txn/m
===============================================================================



*************************************************************************
System Statistics
*************************************************************************
 - Ran for 260.68 seconds
 - Performed 5,800,000 Stored Procedure calls
 - At 22,249.24 calls per second
 - Average Latency = 93.59 ms
 -   Latency   0ms -  25ms = 856
 -   Latency  25ms -  50ms = 447,805
 -   Latency  50ms -  75ms = 3,576,805
 -   Latency  75ms - 100ms = 587,521
 -   Latency 100ms - 125ms = 219,989
 -   Latency 125ms - 150ms = 255,881
 -   Latency 150ms - 175ms = 272,815
 -   Latency 175ms - 200ms = 74,896
 -   Latency 200ms+        = 363,432


-------------------------------------------------------------------------------------
 System Statistics
-------------------------------------------------------------------------------------


-------------------------------------------------------------------------------------
Final:   | Txn.:   5,800,000 [!     26,236] @    22,249.5 TPS | Lat. =       5 <    93.59 <    3904
-------------------------------------------------------------------------------------
Lat.:     25 <     50 <     75 <    100 <    150 <    200 <    250 <    300 <    300+
-------------------------------------------------------------------------------------
%       0.01 |   7.72 |  61.67 |  10.13 |   8.20 |   6.00 |   0.39 |   2.13 |   3.75
voltdb client ended at 1688155794864373491
voltdb client run time 392405290082 ns
```
